<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.553">

  <meta name="author" content="Stumpy">
  <meta name="dcterms.date" content="2023-12-31">
  <title>Exploring AI - Time Series Chanes</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="../evelyn.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="img/logos/gem_cityML_slide.png" data-background-opacity="0.95" data-background-position="0%" data-background-size="100% 100%" class="quarto-title-block center">
  <h1 class="title">Time Series Chanes</h1>
  <p class="subtitle">Fast, effective tool for timeseries.</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Stumpy 
</div>
</div>
</div>

  <p class="date">2023-12-31</p>
</section>
<section>
<section id="time-series-chains" class="title-slide slide level1 center">
<h1>Time Series Chains</h1>

</section>
<section id="forecasting-web-query-data-with-anchored-time-series-chains-atsc" class="slide level2">
<h2>Forecasting Web Query Data with Anchored Time Series Chains (ATSC)</h2>
<p>This example is adapted from the <a href="https://archives.iw3c2.org/www2015/documents/proceedings/proceedings/p721.pdf">Web Query Volume case study: “The web as a jungle: Nonlinear dynamical systems for co-evolving online activities”</a> and utilizes the main takeaways from the <a href="https://www.cs.ucr.edu/~eamonn/chains_ICDM.pdf">Matrix Profile VII</a> research paper.</p>
</section>
<section id="getting-started" class="slide level2">
<h2>Getting Started</h2>
<p>Let’s import the packages that we’ll need to load, analyze, and plot the data.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a></a><span class="op">%</span>matplotlib inline</span>
<span id="cb1-2"><a></a></span>
<span id="cb1-3"><a></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-5"><a></a><span class="im">import</span> stumpy</span>
<span id="cb1-6"><a></a><span class="im">from</span> scipy.io <span class="im">import</span> loadmat</span>
<span id="cb1-7"><a></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-8"><a></a><span class="im">from</span> matplotlib.patches <span class="im">import</span> Rectangle, FancyArrowPatch</span>
<span id="cb1-9"><a></a><span class="im">import</span> itertools</span>
<span id="cb1-10"><a></a></span>
<span id="cb1-11"><a></a>plt.style.use(<span class="st">'https://raw.githubusercontent.com/TDAmeritrade/stumpy/main/docs/stumpy.mplstyle'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="what-are-time-series-chains" class="slide level2">
<h2>What are Time Series Chains?</h2>
<p>Time series chains may be informally considered as motifs that evolve or drift in some direction over time. The figure below illustrates the difference between <a href="../tutorial/Tutorial_STUMPY_Basics.html">time series motifs</a> (left) and time series chains (right).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a></a>x <span class="op">=</span> np.random.rand(<span class="dv">20</span>)</span>
<span id="cb2-2"><a></a>y <span class="op">=</span> np.random.rand(<span class="dv">20</span>)</span>
<span id="cb2-3"><a></a>n <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb2-4"><a></a>motifs_x <span class="op">=</span> <span class="fl">0.5</span> <span class="op">*</span> np.ones(n) <span class="op">+</span> np.random.uniform(<span class="op">-</span><span class="fl">0.05</span>, <span class="fl">0.05</span>, n)</span>
<span id="cb2-5"><a></a>motifs_y <span class="op">=</span> <span class="fl">0.5</span> <span class="op">*</span> np.ones(n) <span class="op">+</span> np.random.uniform(<span class="op">-</span><span class="fl">0.05</span>, <span class="fl">0.05</span>, n)</span>
<span id="cb2-6"><a></a>sin_x <span class="op">=</span> np.linspace(<span class="dv">0</span>, np.pi<span class="op">/</span><span class="dv">2</span>, n<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb2-7"><a></a>sin_y <span class="op">=</span> np.sin(sin_x)<span class="op">/</span><span class="dv">4</span></span>
<span id="cb2-8"><a></a>chains_x <span class="op">=</span> <span class="fl">0.5</span> <span class="op">*</span> np.ones(n<span class="op">+</span><span class="dv">1</span>) <span class="op">+</span> <span class="fl">0.02</span> <span class="op">*</span> np.arange(n<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb2-9"><a></a>chains_y <span class="op">=</span> <span class="fl">0.5</span> <span class="op">*</span> np.ones(n<span class="op">+</span><span class="dv">1</span>) <span class="op">+</span> sin_y</span>
<span id="cb2-10"><a></a>fig, axes <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">1</span>, ncols<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb2-11"><a></a>axes[<span class="dv">0</span>].scatter(x, y, color<span class="op">=</span><span class="st">'lightgrey'</span>)</span>
<span id="cb2-12"><a></a>axes[<span class="dv">0</span>].scatter(motifs_x, motifs_y, color<span class="op">=</span><span class="st">'red'</span>)</span>
<span id="cb2-13"><a></a>axes[<span class="dv">1</span>].scatter(x, y, color<span class="op">=</span><span class="st">'lightgrey'</span>)</span>
<span id="cb2-14"><a></a>axes[<span class="dv">1</span>].scatter(chains_x[<span class="dv">0</span>], chains_y[<span class="dv">0</span>], edgecolor<span class="op">=</span><span class="st">'red'</span>, color<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb2-15"><a></a>axes[<span class="dv">1</span>].scatter(chains_x[<span class="dv">1</span>:n], chains_y[<span class="dv">1</span>:n], color<span class="op">=</span><span class="st">'red'</span>)</span>
<span id="cb2-16"><a></a>axes[<span class="dv">1</span>].scatter(chains_x[n], chains_y[n], edgecolor<span class="op">=</span><span class="st">'red'</span>, color<span class="op">=</span><span class="st">'white'</span>, marker<span class="op">=</span><span class="st">'*'</span>, s<span class="op">=</span><span class="dv">200</span>)</span>
<span id="cb2-17"><a></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<img data-src="Tutorial_Time_Series_Chains_files/Tutorial_Time_Series_Chains_4_0.png" class="margin-caption r-stretch quarto-figure-center"><p class="caption">png</p><p>Above, we are visualizing time series subsequences as points in high-dimensional space. Shown on the left is a time series motif and it can be thought of as a collection of points that approximate a platonic ideal. In contrast, depicted on the right, is a time series chain and it may be thought of as an evolving trail of points in the space. Here, the open red circle represents the first link in the chain, the anchor. Both motifs and chains have the property that each subsequence is relatively close to its nearest neighbor. However, the motif set (left) also has a relatively small diameter. In contrast, the set of points in a chain (right) has a diameter that is much larger than the mean of each member’s distance to its nearest neighbor and, moreover, the chain has the important property of <b>directionality</b>. For example, in the case of a motif, if an additional member was added to the motif set, its location will also be somewhere near the platonic ideal, but independent of the previous subsequences. In contrast, in the case of a chain, the location of the next member of the chain would be somewhere after the last red circle, possibly where the open red star is located.</p>
</section>
<section id="a-simplified-example" class="slide level2 scrollable">
<h2>A Simplified Example</h2>
<p>Adapted from the <a href="https://www.cs.ucr.edu/~eamonn/chains_ICDM.pdf">Matrix Profile VII</a> paper, consider the following time series:</p>
<p>47, 32, 1, 22, 2, 58, 3, 36, 4, -5, 5, 40</p>
<p>Assume that the subsequence length is 1 and the distance between two subsequences is simply the absolute difference between them. To be clear, we are making these simple and pathological assumptions here just for the purposes of elucidation; we are actually targeting much longer subsequence lengths and using z-normalized Euclidean distance in our applications. To capture the directionality of a time series chain, we need to store the left and right nearest neighbor information into the left (IL) and right (IR) matrix profile indices:</p>
<table>
<thead>
<tr class="header">
<th>Index</th>
<th>Value</th>
<th>Left Index (IL)</th>
<th>Right Index (IR)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>47</td>
<td>-</td>
<td>12</td>
</tr>
<tr class="even">
<td>2</td>
<td>32</td>
<td>1</td>
<td>8</td>
</tr>
<tr class="odd">
<td>3</td>
<td>1</td>
<td>2</td>
<td>5</td>
</tr>
<tr class="even">
<td>4</td>
<td>22</td>
<td>2</td>
<td>8</td>
</tr>
<tr class="odd">
<td>5</td>
<td>2</td>
<td>3</td>
<td>7</td>
</tr>
<tr class="even">
<td>6</td>
<td>58</td>
<td>1</td>
<td>12</td>
</tr>
<tr class="odd">
<td>7</td>
<td>3</td>
<td>5</td>
<td>9</td>
</tr>
<tr class="even">
<td>8</td>
<td>36</td>
<td>2</td>
<td>12</td>
</tr>
<tr class="odd">
<td>9</td>
<td>4</td>
<td>7</td>
<td>11</td>
</tr>
<tr class="even">
<td>10</td>
<td>-5</td>
<td>3</td>
<td>11</td>
</tr>
<tr class="odd">
<td>11</td>
<td>5</td>
<td>9</td>
<td>12</td>
</tr>
<tr class="even">
<td>12</td>
<td>40</td>
<td>8</td>
<td>-</td>
</tr>
</tbody>
</table>
<p>In this vertical/transposed representation, the <code>index</code> column shows the location of every subsequence in the time series, the <code>value</code> column contains the original numbers from our time series above, the <code>IL</code> column shows the left matrix profile indices, and <code>IR</code> is the right matrix profile indices. For example, <code>IR[2] = 8</code> means the right nearest neighbor of <code>index = 2</code> (which has <code>value = 32</code>) is at <code>index = 8</code> (which has <code>value = 36</code>). Similarly, <code>IL[3] = 2</code> means that the left nearest neighbor of <code>index = 3</code> (with <code>value = 1</code>) is at <code>index = 2</code> (which has <code>value = 32</code>). To better visualize the left/right matrix profile index, we use arrows to link every subsequence in the time series with its left and right nearest neighbors:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a></a>nearest_neighbors <span class="op">=</span> np.array([[<span class="dv">1</span>,  <span class="dv">47</span>, np.nan,     <span class="dv">12</span>],</span>
<span id="cb3-2"><a></a>                              [<span class="dv">2</span>,  <span class="dv">32</span>,      <span class="dv">1</span>,      <span class="dv">8</span>],</span>
<span id="cb3-3"><a></a>                              [<span class="dv">3</span>,   <span class="dv">1</span>,      <span class="dv">2</span>,      <span class="dv">5</span>],</span>
<span id="cb3-4"><a></a>                              [<span class="dv">4</span>,  <span class="dv">22</span>,      <span class="dv">2</span>,      <span class="dv">8</span>],</span>
<span id="cb3-5"><a></a>                              [<span class="dv">5</span>,   <span class="dv">2</span>,      <span class="dv">3</span>,      <span class="dv">7</span>],</span>
<span id="cb3-6"><a></a>                              [<span class="dv">6</span>,  <span class="dv">58</span>,      <span class="dv">1</span>,     <span class="dv">12</span>],</span>
<span id="cb3-7"><a></a>                              [<span class="dv">7</span>,   <span class="dv">3</span>,      <span class="dv">5</span>,      <span class="dv">9</span>],</span>
<span id="cb3-8"><a></a>                              [<span class="dv">8</span>,  <span class="dv">36</span>,      <span class="dv">2</span>,     <span class="dv">12</span>],</span>
<span id="cb3-9"><a></a>                              [<span class="dv">9</span>,   <span class="dv">4</span>,      <span class="dv">7</span>,     <span class="dv">11</span>],</span>
<span id="cb3-10"><a></a>                              [<span class="dv">10</span>, <span class="op">-</span><span class="dv">5</span>,      <span class="dv">3</span>,     <span class="dv">11</span>],</span>
<span id="cb3-11"><a></a>                              [<span class="dv">11</span>,  <span class="dv">5</span>,      <span class="dv">9</span>,     <span class="dv">12</span>],</span>
<span id="cb3-12"><a></a>                              [<span class="dv">12</span>, <span class="dv">40</span>,      <span class="dv">8</span>, np.nan]])</span>
<span id="cb3-13"><a></a></span>
<span id="cb3-14"><a></a>colors <span class="op">=</span> [[<span class="st">'C1'</span>, <span class="st">'C1'</span>],</span>
<span id="cb3-15"><a></a>          [<span class="st">'C2'</span>, <span class="st">'C5'</span>],</span>
<span id="cb3-16"><a></a>          [<span class="st">'C3'</span>, <span class="st">'C5'</span>],</span>
<span id="cb3-17"><a></a>          [<span class="st">'C4'</span>, <span class="st">'C4'</span>],</span>
<span id="cb3-18"><a></a>          [<span class="st">'C3'</span>, <span class="st">'C2'</span>],</span>
<span id="cb3-19"><a></a>          [<span class="st">'C5'</span>, <span class="st">'C3'</span>],</span>
<span id="cb3-20"><a></a>          [<span class="st">'C3'</span>, <span class="st">'C2'</span>],</span>
<span id="cb3-21"><a></a>          [<span class="st">'C2'</span>, <span class="st">'C1'</span>],</span>
<span id="cb3-22"><a></a>          [<span class="st">'C3'</span>, <span class="st">'C2'</span>],</span>
<span id="cb3-23"><a></a>          [<span class="st">'C6'</span>, <span class="st">'C1'</span>],</span>
<span id="cb3-24"><a></a>          [<span class="st">'C6'</span>, <span class="st">'C2'</span>],</span>
<span id="cb3-25"><a></a>          [<span class="st">'C1'</span>, <span class="st">'C1'</span>]]</span>
<span id="cb3-26"><a></a></span>
<span id="cb3-27"><a></a>style<span class="op">=</span><span class="st">"Simple, tail_width=0.5, head_width=6, head_length=8"</span></span>
<span id="cb3-28"><a></a>kw <span class="op">=</span> <span class="bu">dict</span>(arrowstyle<span class="op">=</span>style, connectionstyle<span class="op">=</span><span class="st">"arc3, rad=-.5"</span>,)</span>
<span id="cb3-29"><a></a></span>
<span id="cb3-30"><a></a>xs <span class="op">=</span> np.arange(nearest_neighbors.shape[<span class="dv">0</span>]) <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb3-31"><a></a>ys <span class="op">=</span> np.zeros(nearest_neighbors.shape[<span class="dv">0</span>])</span>
<span id="cb3-32"><a></a>plt.plot(xs, ys, markerfacecolor<span class="op">=</span><span class="st">"None"</span>, markeredgecolor<span class="op">=</span><span class="st">"None"</span>, linewidth<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb3-33"><a></a></span>
<span id="cb3-34"><a></a>x0, x1, y0, y1 <span class="op">=</span> plt.axis()</span>
<span id="cb3-35"><a></a>plot_margin <span class="op">=</span> <span class="fl">5.0</span></span>
<span id="cb3-36"><a></a>plt.axis((x0 <span class="op">-</span> plot_margin,</span>
<span id="cb3-37"><a></a>          x1 <span class="op">+</span> plot_margin,</span>
<span id="cb3-38"><a></a>          y0 <span class="op">-</span> plot_margin,</span>
<span id="cb3-39"><a></a>          y1 <span class="op">+</span> plot_margin))</span>
<span id="cb3-40"><a></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb3-41"><a></a></span>
<span id="cb3-42"><a></a><span class="cf">for</span> x, y, nearest_neighbor, color <span class="kw">in</span> <span class="bu">zip</span>(xs, ys, nearest_neighbors, colors):</span>
<span id="cb3-43"><a></a>    plt.text(x, y, <span class="bu">str</span>(<span class="bu">int</span>(nearest_neighbor[<span class="dv">1</span>])), color<span class="op">=</span><span class="st">"black"</span>, fontsize<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb3-44"><a></a>    </span>
<span id="cb3-45"><a></a>    <span class="co"># Plot right matrix profile indices</span></span>
<span id="cb3-46"><a></a>    <span class="cf">if</span> <span class="kw">not</span> np.isnan(nearest_neighbor[<span class="dv">3</span>]):</span>
<span id="cb3-47"><a></a>        arrow <span class="op">=</span> FancyArrowPatch((x, <span class="fl">0.5</span>), (nearest_neighbor[<span class="dv">3</span>], <span class="fl">0.5</span>), color<span class="op">=</span>color[<span class="dv">0</span>], <span class="op">**</span>kw)</span>
<span id="cb3-48"><a></a>        plt.gca().add_patch(arrow)</span>
<span id="cb3-49"><a></a>        </span>
<span id="cb3-50"><a></a>    <span class="co"># Plot left matrix profile indices</span></span>
<span id="cb3-51"><a></a>    <span class="cf">if</span> <span class="kw">not</span> np.isnan(nearest_neighbor[<span class="dv">2</span>]):</span>
<span id="cb3-52"><a></a>        arrow <span class="op">=</span> FancyArrowPatch((x, <span class="fl">0.0</span>), (nearest_neighbor[<span class="dv">2</span>], <span class="fl">0.0</span>), color<span class="op">=</span>color[<span class="dv">1</span>], <span class="op">**</span>kw)</span>
<span id="cb3-53"><a></a>        plt.gca().add_patch(arrow)</span>
<span id="cb3-54"><a></a></span>
<span id="cb3-55"><a></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center margin-caption">
<figure>
<p><img data-src="Tutorial_Time_Series_Chains_files/Tutorial_Time_Series_Chains_7_0.png" class="margin-caption"></p>
<figcaption>png</figcaption>
</figure>
</div>
<p>An arrow pointing from a number to its right nearest neighbor (arrows shown above the time series) can be referred to as forward arrow and an arrow pointing from a number to its left nearest neighbor (arrows shown below the time series) can be referred to as a backward arrow. According to the formal definition of a time series chain (see <a href="https://www.cs.ucr.edu/~eamonn/chains_ICDM.pdf">Matrix Profile VII</a> for a thorough definition and discussion), every pair of consecutive subsequences in a chain must be connected by both a forward arrow and a backward arrow. A keen eye will spot the fact that the longest chain in our simplified example is:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a></a>nearest_neighbors <span class="op">=</span> np.array([[<span class="dv">1</span>,  <span class="dv">47</span>, np.nan, np.nan],</span>
<span id="cb4-2"><a></a>                              [<span class="dv">2</span>,  <span class="dv">32</span>, np.nan, np.nan],</span>
<span id="cb4-3"><a></a>                              [<span class="dv">3</span>,   <span class="dv">1</span>, np.nan,      <span class="dv">5</span>],</span>
<span id="cb4-4"><a></a>                              [<span class="dv">4</span>,  <span class="dv">22</span>, np.nan, np.nan],</span>
<span id="cb4-5"><a></a>                              [<span class="dv">5</span>,   <span class="dv">2</span>,      <span class="dv">3</span>,      <span class="dv">7</span>],</span>
<span id="cb4-6"><a></a>                              [<span class="dv">6</span>,  <span class="dv">58</span>, np.nan, np.nan],</span>
<span id="cb4-7"><a></a>                              [<span class="dv">7</span>,   <span class="dv">3</span>,      <span class="dv">5</span>,      <span class="dv">9</span>],</span>
<span id="cb4-8"><a></a>                              [<span class="dv">8</span>,  <span class="dv">36</span>, np.nan, np.nan],</span>
<span id="cb4-9"><a></a>                              [<span class="dv">9</span>,   <span class="dv">4</span>,      <span class="dv">7</span>,     <span class="dv">11</span>],</span>
<span id="cb4-10"><a></a>                              [<span class="dv">10</span>, <span class="op">-</span><span class="dv">5</span>, np.nan, np.nan],</span>
<span id="cb4-11"><a></a>                              [<span class="dv">11</span>,  <span class="dv">5</span>,      <span class="dv">9</span>, np.nan],</span>
<span id="cb4-12"><a></a>                              [<span class="dv">12</span>, <span class="dv">40</span>, np.nan, np.nan]])</span>
<span id="cb4-13"><a></a></span>
<span id="cb4-14"><a></a>colors <span class="op">=</span> [[<span class="st">'C1'</span>, <span class="st">'C1'</span>],</span>
<span id="cb4-15"><a></a>          [<span class="st">'C2'</span>, <span class="st">'C5'</span>],</span>
<span id="cb4-16"><a></a>          [<span class="st">'C3'</span>, <span class="st">'C5'</span>],</span>
<span id="cb4-17"><a></a>          [<span class="st">'C4'</span>, <span class="st">'C4'</span>],</span>
<span id="cb4-18"><a></a>          [<span class="st">'C3'</span>, <span class="st">'C2'</span>],</span>
<span id="cb4-19"><a></a>          [<span class="st">'C5'</span>, <span class="st">'C3'</span>],</span>
<span id="cb4-20"><a></a>          [<span class="st">'C3'</span>, <span class="st">'C2'</span>],</span>
<span id="cb4-21"><a></a>          [<span class="st">'C2'</span>, <span class="st">'C1'</span>],</span>
<span id="cb4-22"><a></a>          [<span class="st">'C3'</span>, <span class="st">'C2'</span>],</span>
<span id="cb4-23"><a></a>          [<span class="st">'C6'</span>, <span class="st">'C1'</span>],</span>
<span id="cb4-24"><a></a>          [<span class="st">'C6'</span>, <span class="st">'C2'</span>],</span>
<span id="cb4-25"><a></a>          [<span class="st">'C1'</span>, <span class="st">'C1'</span>]]</span>
<span id="cb4-26"><a></a></span>
<span id="cb4-27"><a></a>style<span class="op">=</span><span class="st">"Simple, tail_width=0.5, head_width=6, head_length=8"</span></span>
<span id="cb4-28"><a></a>kw <span class="op">=</span> <span class="bu">dict</span>(arrowstyle<span class="op">=</span>style, connectionstyle<span class="op">=</span><span class="st">"arc3, rad=-.5"</span>,)</span>
<span id="cb4-29"><a></a></span>
<span id="cb4-30"><a></a>xs <span class="op">=</span> np.arange(nearest_neighbors.shape[<span class="dv">0</span>]) <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb4-31"><a></a>ys <span class="op">=</span> np.zeros(nearest_neighbors.shape[<span class="dv">0</span>])</span>
<span id="cb4-32"><a></a>plt.plot(xs, ys, markerfacecolor<span class="op">=</span><span class="st">"None"</span>, markeredgecolor<span class="op">=</span><span class="st">"None"</span>, linewidth<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb4-33"><a></a></span>
<span id="cb4-34"><a></a>x0, x1, y0, y1 <span class="op">=</span> plt.axis()</span>
<span id="cb4-35"><a></a>plot_margin <span class="op">=</span> <span class="fl">5.0</span></span>
<span id="cb4-36"><a></a>plt.axis((x0 <span class="op">-</span> plot_margin,</span>
<span id="cb4-37"><a></a>          x1 <span class="op">+</span> plot_margin,</span>
<span id="cb4-38"><a></a>          y0 <span class="op">-</span> plot_margin,</span>
<span id="cb4-39"><a></a>          y1 <span class="op">+</span> plot_margin))</span>
<span id="cb4-40"><a></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb4-41"><a></a></span>
<span id="cb4-42"><a></a><span class="cf">for</span> x, y, nearest_neighbor, color <span class="kw">in</span> <span class="bu">zip</span>(xs, ys, nearest_neighbors, colors):</span>
<span id="cb4-43"><a></a>    plt.text(x, y, <span class="bu">str</span>(<span class="bu">int</span>(nearest_neighbor[<span class="dv">1</span>])), color<span class="op">=</span><span class="st">"black"</span>, fontsize<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb4-44"><a></a>    </span>
<span id="cb4-45"><a></a>    <span class="co"># Plot right matrix profile indices</span></span>
<span id="cb4-46"><a></a>    <span class="cf">if</span> <span class="kw">not</span> np.isnan(nearest_neighbor[<span class="dv">3</span>]):</span>
<span id="cb4-47"><a></a>        arrow <span class="op">=</span> FancyArrowPatch((x, <span class="fl">0.5</span>), (nearest_neighbor[<span class="dv">3</span>], <span class="fl">0.5</span>), color<span class="op">=</span>color[<span class="dv">0</span>], <span class="op">**</span>kw)</span>
<span id="cb4-48"><a></a>        plt.gca().add_patch(arrow)</span>
<span id="cb4-49"><a></a>        </span>
<span id="cb4-50"><a></a>    <span class="co"># Plot left matrix profile indices</span></span>
<span id="cb4-51"><a></a>    <span class="cf">if</span> <span class="kw">not</span> np.isnan(nearest_neighbor[<span class="dv">2</span>]):</span>
<span id="cb4-52"><a></a>        arrow <span class="op">=</span> FancyArrowPatch((x, <span class="fl">0.0</span>), (nearest_neighbor[<span class="dv">2</span>], <span class="fl">0.0</span>), color<span class="op">=</span>color[<span class="dv">1</span>], <span class="op">**</span>kw)</span>
<span id="cb4-53"><a></a>        plt.gca().add_patch(arrow)</span>
<span id="cb4-54"><a></a></span>
<span id="cb4-55"><a></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center margin-caption">
<figure>
<p><img data-src="Tutorial_Time_Series_Chains_files/Tutorial_Time_Series_Chains_9_0.png" class="margin-caption"></p>
<figcaption>png</figcaption>
</figure>
</div>
<p>The longest extracted chain is therefore 1 ⇌ 2 ⇌ 3 ⇌ 4 ⇌ 5. Note that we see a gradual monotonic increase in the data but, in reality, the increase or decrease in drift can happen in arbitrarily complex ways that can be detected by the time series chains approach. The key component of drifting is that the time series must contain chains with clear directionality.</p>
<p>STUMPY is capable of computing:</p>
<ol type="1">
<li>anchored time series chains (ATSC) - grow a chain from a user-specified anchor (i.e., specific subsequence)</li>
<li>all-chain set (ALLC) - a set of anchored time series chains (i.e., each chain starts with a particular subsequence) that are not subsumed by another longer chain</li>
<li>unanchored time series chain - the unconditionally longest chain within a time series (note that there could be more than one if there were chains with the same length but only one is returned)</li>
</ol>
<p>So, what does this mean in the context of a real time series? Let’s take a look at a real example from web query data!</p>
</section>
<section id="retrieve-the-data" class="slide level2">
<h2>Retrieve the Data</h2>
<p>We will be looking at a noisy dataset that is under-sampled and has a growing trend, which will perfectly illustrate the idea regarding time series chains. The data contains a decade-long GoogleTrend query volume (collected weekly from 2004-2014) for the keyword Kohl’s, an American retail chain. First, we’ll download the data, extract it, and insert it into a pandas dataframe.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a></a>df <span class="op">=</span> pd.read_csv(<span class="st">"https://zenodo.org/record/4276348/files/Time_Series_Chains_Kohls_data.csv?download=1"</span>)</span>
<span id="cb5-2"><a></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
volume
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
0.010417
</td>
</tr>
<tr>
<th>
1
</th>
<td>
0.010417
</td>
</tr>
<tr>
<th>
2
</th>
<td>
0.010417
</td>
</tr>
<tr>
<th>
3
</th>
<td>
0.000000
</td>
</tr>
<tr>
<th>
4
</th>
<td>
0.000000
</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="visualizing-the-data" class="slide level2">
<h2>Visualizing the Data</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a></a>plt.plot(df[<span class="st">'volume'</span>], color<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb6-2"><a></a>plt.xlim(<span class="dv">0</span>, df.shape[<span class="dv">0</span>]<span class="op">+</span><span class="dv">12</span>)</span>
<span id="cb6-3"><a></a>color <span class="op">=</span> itertools.cycle([<span class="st">'white'</span>, <span class="st">'gainsboro'</span>])</span>
<span id="cb6-4"><a></a><span class="cf">for</span> i, x <span class="kw">in</span> <span class="bu">enumerate</span>(<span class="bu">range</span>(<span class="dv">0</span>, df.shape[<span class="dv">0</span>], <span class="dv">52</span>)):</span>
<span id="cb6-5"><a></a>    plt.text(x<span class="op">+</span><span class="dv">12</span>, <span class="fl">0.9</span>, <span class="bu">str</span>(<span class="dv">2004</span><span class="op">+</span>i), color<span class="op">=</span><span class="st">"black"</span>, fontsize<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb6-6"><a></a>    rect <span class="op">=</span> Rectangle((x, <span class="op">-</span><span class="dv">1</span>), <span class="dv">52</span>, <span class="fl">2.5</span>, facecolor<span class="op">=</span><span class="bu">next</span>(color))</span>
<span id="cb6-7"><a></a>    plt.gca().add_patch(rect)</span>
<span id="cb6-8"><a></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<img data-src="Tutorial_Time_Series_Chains_files/Tutorial_Time_Series_Chains_14_0.png" class="margin-caption r-stretch quarto-figure-center"><p class="caption">png</p><p>The raw time series above displays ten years of web query volume for the keyword “Kohl’s”, where each alternating white and grey vertical band represents a 52 week period starting from 2004 to 2014. As depicted, the time series features a significant but unsurprising “end-of-year holiday bump”. Relating back to time series chains, we can see that the bump is generally increasing over time and so we might be able to capture this when we compute the unanchored chain.</p>
<p>However, as we learned above, in order to compute any time series chains, we also need the left and right matrix profile indices. Luckily for us, according to the docstring, the <code>stump</code> function not only returns the (bidirectional) matrix profile and the matrix profile indices in the first and second columns of the NumPy array, respectively, but the third and fourth columns consists of the left matrix profile indices and the right matrix profile indices, respectively.</p>
</section>
<section id="computing-the-left-and-right-matrix-profile-indices" class="slide level2">
<h2>Computing the Left and Right Matrix Profile Indices</h2>
<p>So, let’s go ahead and compute the matrix profile indices and we’ll set the window size, <code>m = 20</code>, which is the approximate length of a “bump”.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a></a>m <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb7-2"><a></a>mp <span class="op">=</span> stumpy.stump(df[<span class="st">'volume'</span>], m<span class="op">=</span>m)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="computing-the-unanchored-chain" class="slide level2">
<h2>Computing the Unanchored Chain</h2>
<p>Now, with our left and right matrix profile indices in hand, we are ready to call the all-chain set function, <code>allc</code>, which not only returns the all-chain set but, as a freebie, it also returns the unconditionally longest chain, also know as the unanchored chain. The latter of which is really what we’re most interested in.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a></a>all_chain_set, unanchored_chain <span class="op">=</span> stumpy.allc(mp[:, <span class="dv">2</span>], mp[:, <span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>:::{admonition} <strong>Added after STUMPY version 1.12.0</strong> :class: note</p>
<p>In place of array slicing (i.e., <code>mp[:, 2]</code>, <code>mp[:, 3]</code>), the left and right matrix profile indices can also be accessed through the <code>left_I_</code> and <code>right_I_</code> attributes, respectively.</p>
<pre><code>mp = stumpy.stump(T, m)
print(mp.left_I_, mp.right_I_)  # print the left and right matrix profile indices </code></pre>
<p>Additionally, you can also access the matrix profile distances directly through the <code>P_</code> attribute and the matrix profile indices can be accessed through the <code>I_</code> attribute. :::</p>
</section>
<section id="visualizing-the-unanchored-chain" class="slide level2">
<h2>Visualizing the Unanchored Chain</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a></a>plt.plot(df[<span class="st">'volume'</span>], linewidth<span class="op">=</span><span class="dv">1</span>, color<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb10-2"><a></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(unanchored_chain.shape[<span class="dv">0</span>]):</span>
<span id="cb10-3"><a></a>    y <span class="op">=</span> df[<span class="st">'volume'</span>].iloc[unanchored_chain[i]:unanchored_chain[i]<span class="op">+</span>m]</span>
<span id="cb10-4"><a></a>    x <span class="op">=</span> y.index.values</span>
<span id="cb10-5"><a></a>    plt.plot(x, y, linewidth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb10-6"><a></a>color <span class="op">=</span> itertools.cycle([<span class="st">'white'</span>, <span class="st">'gainsboro'</span>])</span>
<span id="cb10-7"><a></a><span class="cf">for</span> i, x <span class="kw">in</span> <span class="bu">enumerate</span>(<span class="bu">range</span>(<span class="dv">0</span>, df.shape[<span class="dv">0</span>], <span class="dv">52</span>)):</span>
<span id="cb10-8"><a></a>    plt.text(x<span class="op">+</span><span class="dv">12</span>, <span class="fl">0.9</span>, <span class="bu">str</span>(<span class="dv">2004</span><span class="op">+</span>i), color<span class="op">=</span><span class="st">"black"</span>, fontsize<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb10-9"><a></a>    rect <span class="op">=</span> Rectangle((x, <span class="op">-</span><span class="dv">1</span>), <span class="dv">52</span>, <span class="fl">2.5</span>, facecolor<span class="op">=</span><span class="bu">next</span>(color))</span>
<span id="cb10-10"><a></a>    plt.gca().add_patch(rect)</span>
<span id="cb10-11"><a></a></span>
<span id="cb10-12"><a></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center margin-caption">
<figure>
<p><img data-src="Tutorial_Time_Series_Chains_files/Tutorial_Time_Series_Chains_22_0.png" class="margin-caption"></p>
<figcaption>png</figcaption>
</figure>
</div>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb11-2"><a></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(unanchored_chain.shape[<span class="dv">0</span>]):</span>
<span id="cb11-3"><a></a>    data <span class="op">=</span> df[<span class="st">'volume'</span>].iloc[unanchored_chain[i]:unanchored_chain[i]<span class="op">+</span>m].reset_index().values</span>
<span id="cb11-4"><a></a>    x <span class="op">=</span> data[:, <span class="dv">0</span>]</span>
<span id="cb11-5"><a></a>    y <span class="op">=</span> data[:, <span class="dv">1</span>]</span>
<span id="cb11-6"><a></a>    plt.axvline(x<span class="op">=</span>x[<span class="dv">0</span>]<span class="op">-</span>x.<span class="bu">min</span>()<span class="op">+</span>(m<span class="op">+</span><span class="dv">5</span>)<span class="op">*</span>i <span class="op">+</span> <span class="dv">11</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb11-7"><a></a>    plt.axvline(x<span class="op">=</span>x[<span class="dv">0</span>]<span class="op">-</span>x.<span class="bu">min</span>()<span class="op">+</span>(m<span class="op">+</span><span class="dv">5</span>)<span class="op">*</span>i <span class="op">+</span> <span class="dv">15</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-.'</span>)</span>
<span id="cb11-8"><a></a>    plt.plot(x<span class="op">-</span>x.<span class="bu">min</span>()<span class="op">+</span>(m<span class="op">+</span><span class="dv">5</span>)<span class="op">*</span>i, y<span class="op">-</span>y.<span class="bu">min</span>(), linewidth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb11-9"><a></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center margin-caption">
<figure>
<p><img data-src="Tutorial_Time_Series_Chains_files/Tutorial_Time_Series_Chains_23_0.png" class="margin-caption"></p>
<figcaption>png</figcaption>
</figure>
</div>
<p>The discovered chain shows that over the decade, the bump transitions from a smooth bump covering the period between Thanksgiving (solid vertical line) and Christmas (dashed vertical line), to a more sharply focused bump centered on Thanksgiving. This seems to reflect the growing importance of “Cyber Monday”, a marketing term for the Monday after Thanksgiving. The phrase was created by marketing companies to persuade consumers to shop online. The term made its debut on November 28th, 2005 in a press release entitled “Cyber Monday Quickly Becoming One of the Biggest Online Shopping Days of the Year”. Note that this date coincides with the first glimpse of the sharpening peak in our chain.</p>
<p>It also appears that we may have “missed” a few links in the chain. However, note that the data is noisy and undersampled, and the “missed” bumps are too distorted to conform with the general evolving trend. This noisy example actually illustrates the robustness of the time series chains technique. As noted before, we don’t actually need “perfect” data in order to find meaningful chains. Even if some links are badly distorted, the discovered chain will still be able to include all of the other evolving patterns.</p>
<p>One final consideration is the potential use of chains to predict the future. One could leverage the evolving links within the chains in order to forecast the shape of the next bump. We refer the reader to the <a href="https://www.cs.ucr.edu/~eamonn/chains_ICDM.pdf">Matrix Profile VII</a> for further discussions on this topic.</p>
</section>
<section id="summary" class="slide level2">
<h2>Summary</h2>
<p>And that’s it! You’ve just learned the basics of how to identify directional trends, also known as chains, within your data using the matrix profile indices and leveraging <code>allc</code>.</p>
</section>
<section id="resources" class="slide level2">
<h2>Resources</h2>
<p><a href="https://www.cs.ucr.edu/~eamonn/chains_ICDM.pdf">Matrix Profile VII</a></p>
<p><a href="https://sites.google.com/site/timeserieschain/">Matrix Profile VII Supplementary Materials</a></p>
<p><a href="https://stumpy.readthedocs.io/en/latest/">STUMPY Documentation</a></p>
<p><a href="https://github.com/TDAmeritrade/stumpy">STUMPY Matrix Profile Github Code Repository</a></p>

<div class="quarto-auto-generated-content">
<p><img src="../img/logos/DidactexLogo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>Gem City Tech ML/AI</p>
</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'fast',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>